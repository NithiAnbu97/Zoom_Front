(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t){},133:function(e,t){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(9),i=n.n(c),r=n(179),l=n.p+"static/media/zoomIcon.cecd0999.jpg",s=n(35),o=n(182),d=n(184),j=n(185),u=n(19),b=n(85),m=n(56),x=n.n(m),O=n(4),p=Object(a.createContext)(),h=Object(b.io)("https://zoom-clone-back.herokuapp.com/"),f=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(u.a)(n,2),i=c[0],r=c[1],l=Object(a.useState)(""),s=Object(u.a)(l,2),o=s[0],d=s[1],j=Object(a.useState)({}),b=Object(u.a)(j,2),m=b[0],f=b[1],g=Object(a.useState)(!1),v=Object(u.a)(g,2),C=v[0],w=v[1],y=Object(a.useState)(!1),N=Object(u.a)(y,2),k=N[0],I=N[1],S=Object(a.useState)(""),D=Object(u.a)(S,2),A=D[0],z=D[1],W=Object(a.useRef)(),E=Object(a.useRef)(),V=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),W.current.srcObject=e})),h.on("me",(function(e){d(e)})),h.on("calluser",(function(e){var t=e.from,n=e.name,a=e.signal;f({isReceivedCall:!0,from:t,name:n,signal:a})}))}),[]);return Object(O.jsx)(p.Provider,{value:{call:m,callAccepted:C,callEnded:k,me:o,myVideo:W,userVideo:E,stream:i,name:A,setName:z,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){h.emit("calluser",{userToCall:e,signalData:t,from:o,name:A})})),t.on("stream",(function(e){E.current.srcObject=e})),h.on("callaccepted",(function(e){w(!0),t.signal(e)})),V.current=t},leaveCall:function(){I(!0),V.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new x.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){h.emit("answerCall",{signal:e,to:m.from})})),e.on("stream",(function(e){E.current.srcObject=e})),e.signal(m.signal),V.current=e}},children:t})},g=Object(r.a)((function(e){return{video:Object(s.a)({width:"400px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(s.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"2px",border:"1px solid black",margin:"10px"}}})),v=function(){var e=Object(a.useContext)(p),t=e.name,n=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,l=e.stream,s=e.call,u=g();return Object(O.jsxs)(o.a,{container:!0,className:u.gridContainer,children:[l&&Object(O.jsx)(d.a,{className:u.paper,children:Object(O.jsxs)(o.a,{item:!0,xs:10,md:6,children:[Object(O.jsx)(j.a,{varient:"h3",gutterBottom:!0,children:t}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video})]})}),n&&!r&&Object(O.jsx)(d.a,{className:u.paper,children:Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(j.a,{varient:"h3",gutterBottom:!0,children:s.name}),Object(O.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:u.video})]})})]})},C=n(186),w=n(190),y=n(191),N=n(91),k=n(187),I=n(188),S=n(189),D=Object(r.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(s.a)({minWidth:"200px"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(s.a)({width:"50%",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"5px 10px",border:"1px solid black"}}})),A=function(e){var t=e.children,n=Object(a.useContext)(p),c=n.me,i=n.callAccepted,r=n.name,l=n.setName,s=n.callEnded,b=n.callUser,m=n.leaveCall,x=Object(a.useState)(""),h=Object(u.a)(x,2),f=h[0],g=h[1],v=D();return Object(O.jsx)(C.a,{className:v.container,children:Object(O.jsxs)(d.a,{elevation:10,className:v.paper,children:[Object(O.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(O.jsxs)(o.a,{container:!0,className:v.gridContainer,children:[Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(O.jsx)(j.a,{gutterBottom:!0,varient:"h6",children:"Account"}),Object(O.jsx)(w.a,{label:"Name",value:r,onChange:function(e){return l(e.target.value)},fullWidth:!0,children:" "}),Object(O.jsx)(N.CopyToClipboard,{text:c,className:v.margin,children:Object(O.jsx)(y.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(O.jsx)(k.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(O.jsx)(j.a,{gutterBottom:!0,varient:"h6",children:"Make a Call"}),Object(O.jsx)(w.a,{label:"ID to call",value:f,onChange:function(e){return g(e.target.value)},fullWidth:!0}),i&&!s?Object(O.jsx)(y.a,{variant:"contained",color:"secondary",startIcon:Object(O.jsx)(I.a,{fontSize:"large"}),fullWidth:!0,onClick:m,className:v.margin,children:"Hang Up"}):Object(O.jsx)(y.a,{variant:"contained",color:"primary",startIcon:Object(O.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return b(f)},className:v.margin,children:"Call"})]})]})}),t]})})},z=function(){var e=Object(a.useContext)(p),t=e.answerCall,n=e.call,c=e.callAccepted;return Object(O.jsx)(O.Fragment,{children:n.isReceivedCall&&!c&&Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(O.jsxs)("h1",{children:[n.name," is calling: "]}),Object(O.jsx)(y.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},W=Object(r.a)((function(e){return{wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),E=function(){var e=W();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:l,style:{height:"100px",width:"100px"},alt:"zoom-icon"}),Object(O.jsx)("h1",{style:{fontSize:"large",color:"#4C95FC",fontWeight:"100",padding:"20px 20px"},children:Object(O.jsx)("b",{children:"VIDEO CHAT APP"})})]}),Object(O.jsxs)("div",{className:e.wrapper,children:[Object(O.jsx)(v,{}),Object(O.jsx)(A,{children:Object(O.jsx)(z,{})})]})]})};n(148);i.a.render(Object(O.jsx)(f,{children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.21660225.chunk.js.map